<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>PROMED Inventory</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px}

    .login-screen{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;z-index:1000}
    .login-box{background:white;padding:40px;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,0.3);text-align:center;max-width:400px;width:90%}
    .login-box h1{color:#667eea;font-size:32px;margin-bottom:8px}
    .login-box p{color:#666;font-size:14px;margin-bottom:30px}
    .login-box input{width:100%;padding:14px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;margin-bottom:16px}
    .login-box button{width:100%;background:linear-gradient(135deg,#667eea,#764ba2);color:white;border:none;padding:14px;border-radius:8px;cursor:pointer;font-weight:600;font-size:16px}
    .error{color:#ef4444;font-size:13px;margin-top:10px}

    .app{max-width:1400px;margin:0 auto;display:none}
    .header{background:white;padding:25px;border-radius:12px;margin-bottom:20px;box-shadow:0 4px 6px rgba(0,0,0,0.1);position:relative}
    .header h1{color:#667eea;font-size:28px;margin-bottom:8px}
    .header p{color:#666;font-size:14px}
    .logout{position:absolute;top:25px;right:25px;background:#ef4444;color:white;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:600;font-size:13px}

    .tabs{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap}
    .tab-btn{background:white;border:none;padding:12px 24px;border-radius:8px;cursor:pointer;font-weight:600;font-size:14px;color:#666;box-shadow:0 2px 4px rgba(0,0,0,0.1)}
    .tab-btn.active{background:linear-gradient(135deg,#667eea,#764ba2);color:white}

    .tab-content{display:none;background:white;border-radius:12px;padding:25px;box-shadow:0 4px 6px rgba(0,0,0,0.1)}
    .tab-content.active{display:block}
    .tab-content h2{color:#333;font-size:22px;margin-bottom:8px}
    .tab-content>p{color:#666;font-size:14px;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #f0f0f0}

    .table-wrap{overflow-x:auto;margin-bottom:20px}
    table{width:100%;border-collapse:collapse;font-size:13px}
    thead{background:linear-gradient(135deg,#667eea,#764ba2);color:white}
    th{padding:12px;text-align:left;font-weight:600;white-space:nowrap}
    td{padding:10px 12px;border-bottom:1px solid #e0e0e0;vertical-align:top}
    tbody tr:hover{background:#f8f9ff}
    input,select,textarea{width:100%;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:13px}
    textarea{resize:vertical}
    .computed{background:#f0f9ff;font-weight:600;color:#0284c7}

    .btn{background:linear-gradient(135deg,#667eea,#764ba2);color:white;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-weight:600;font-size:14px}
    .btn.green{background:#10b981}
    .btn.red{background:#ef4444}
    .btn.gray{background:#6b7280}
    .btn:disabled{opacity:.55;cursor:not-allowed}

    .actions{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-top:10px;
      flex-wrap:wrap;
    }
    .actions-left{display:flex;gap:10px;align-items:center}
    .actions-right{display:flex;gap:10px;align-items:center;margin-left:auto}

    .status{margin-top:15px;padding:12px;border-radius:6px;font-size:14px;font-weight:500;display:none;white-space:pre-wrap}
    .status.success{background:#d1fae5;color:#065f46;border:1px solid #10b981;display:block}
    .status.error{background:#fee2e2;color:#991b1b;border:1px solid #ef4444;display:block}
    .status.loading{background:#dbeafe;color:#1e40af;border:1px solid #3b82f6;display:block}

    .toast{
      position:fixed; right:18px; bottom:18px;
      background:#111827; color:white;
      padding:12px 14px; border-radius:10px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      font-size:14px; font-weight:600;
      display:none;
      max-width:360px;
      z-index:2000;
    }
    .toast.show{display:block}
    .toast.success{background:#065f46}
    .toast.error{background:#991b1b}

    .icon-btn{
      border:none;
      background:#fee2e2;
      color:#991b1b;
      padding:8px 10px;
      border-radius:8px;
      cursor:pointer;
      font-weight:700;
      line-height:1;
      width:38px;
    }
    .icon-btn:hover{background:#fecaca}

    /* Bundle nested styling */
    .bundle-head{background:#f8fafc}
    .bundle-items-row td{background:#ffffff}
    .bundle-items-wrap{
      border-left:4px solid #e5e7eb;
      padding-left:12px;
    }
    .bundle-items-table th{background:#f3f4f6;color:#111827}
    .bundle-items-table{width:100%;border-collapse:collapse}
    .bundle-items-table th,.bundle-items-table td{border-bottom:1px solid #e5e7eb;padding:8px 10px}
    .small-note{opacity:.75;font-size:12px}

    /* Logout modal */
    .modal-overlay{
      position:fixed; inset:0;
      background:rgba(0,0,0,.45);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:2500;
      padding:18px;
    }
    .modal-overlay.show{display:flex}

    .modal{
      background:white;
      width:min(520px, 95vw);
      border-radius:16px;
      box-shadow:0 20px 60px rgba(0,0,0,.35);
      padding:22px;
    }
    .modal h3{font-size:18px;color:#111827;margin-bottom:6px}
    .modal p{font-size:14px;color:#6b7280;margin-bottom:18px;line-height:1.4}
    .modal-actions{
      display:flex;
      justify-content:flex-end;
      gap:10px;
    }
  </style>
</head>
<body>

<div id="loginScreen" class="login-screen">
  <div class="login-box">
    <h1>üìä PROMED</h1>
    <p>Inventory & Financial Tracker</p>
    <input type="password" id="loginCode" placeholder="Enter access code">
    <button onclick="doLogin()">Login</button>
    <p id="loginError" class="error"></p>
  </div>
</div>

<div id="app" class="app">
  <div class="header">
    <h1>üìä PROMED ‚Äî Inventory Tracker</h1>
    <p>Complete inventory management system</p>
    <button class="logout" onclick="openLogoutModal()">Logout</button>
  </div>

  <div class="tabs">
    <button class="tab-btn active" onclick="showTab(0)">üì¶ Inventory</button>
    <button class="tab-btn" onclick="showTab(1)">üéÅ Bundles</button>
    <button class="tab-btn" onclick="showTab(2)">üí∞ Sales</button>
    <button class="tab-btn" onclick="showTab(3)">üìã Payables</button>
  </div>

  <!-- TAB 0 -->
  <div id="tab0" class="tab-content active">
    <h2>üì¶ Aggregated Inventory</h2>
    <p>Current inventory state</p>

    <div class="table-wrap">
      <table id="invTable" data-body="invBody" data-rowtype="inv">
        <thead>
          <tr>
            <th style="width:50px">Del</th>
            <th>Item</th><th>Category</th><th>Qty</th><th>Cost (‚Çµ)</th><th>Price (‚Çµ)</th><th>Total Cost</th><th>Total Retail</th><th>Notes</th>
          </tr>
        </thead>
        <tbody id="invBody"></tbody>
      </table>
    </div>

    <div class="actions">
      <div class="actions-left">
        <button class="btn" onclick="addRow('invBody','inv')">+ Add</button>
      </div>
      <div class="actions-right">
        <button id="invSubmit" class="btn green" onclick="submitSheet('Aggregated Inventory','invTable','invStatus','invSubmit')">üì§ Submit</button>
      </div>
    </div>

    <div id="invStatus" class="status"></div>
  </div>

  <!-- TAB 1 -->
  <div id="tab1" class="tab-content">
    <h2>üéÅ Bundles</h2>
    <p>
      Create bundles with any number of items.<br>
      <span class="small-note">Each bundle has its own ‚ÄúAdd Item‚Äù. Submitting sends bundle + items to Google Sheets.</span>
    </p>

    <div class="table-wrap">
      <table id="bundleTable">
        <thead>
          <tr>
            <th style="width:50px">Del</th>
            <th>Bundle Name</th>
            <th>Bundle Price (‚Çµ)</th>
            <th>Notes</th>
            <th style="width:140px">Actions</th>
          </tr>
        </thead>
        <tbody id="bundleBody"></tbody>
      </table>
    </div>

    <div class="actions">
      <div class="actions-left">
        <button class="btn" onclick="addBundle()">+ Add Bundle</button>
      </div>
      <div class="actions-right">
        <button id="bundleSubmit" class="btn green" onclick="submitBundles('bunStatus','bundleSubmit')">üì§ Submit</button>
      </div>
    </div>

    <div id="bunStatus" class="status"></div>
  </div>

  <!-- TAB 2 -->
  <div id="tab2" class="tab-content">
    <h2>üí∞ Sales</h2>
    <p>Recent sales data</p>

    <div class="table-wrap">
      <table id="salesTable" data-body="salesBody" data-rowtype="sales">
        <thead>
          <tr>
            <th style="width:50px">Del</th>
            <th>Date</th><th>Item</th><th>Type</th><th>Qty</th><th>Price (‚Çµ)</th><th>Payment</th><th>Notes</th>
          </tr>
        </thead>
        <tbody id="salesBody"></tbody>
      </table>
    </div>

    <div class="actions">
      <div class="actions-left">
        <button class="btn" onclick="addRow('salesBody','sales')">+ Add</button>
      </div>
      <div class="actions-right">
        <button id="salesSubmit" class="btn green" onclick="submitSheet('Sales Snapshot','salesTable','salesStatus','salesSubmit')">üì§ Submit</button>
      </div>
    </div>

    <div id="salesStatus" class="status"></div>
  </div>

  <!-- TAB 3 -->
  <div id="tab3" class="tab-content">
    <h2>üìã Payables</h2>
    <p>Outstanding debts</p>

    <div class="table-wrap">
      <table id="payTable" data-body="payBody" data-rowtype="pay">
        <thead>
          <tr>
            <th style="width:50px">Del</th>
            <th>Creditor</th><th>Amount (‚Çµ)</th><th>Reason</th><th>Items</th><th>Due</th><th>Status</th><th>Notes</th>
          </tr>
        </thead>
        <tbody id="payBody"></tbody>
      </table>
    </div>

    <div class="actions">
      <div class="actions-left">
        <button class="btn" onclick="addRow('payBody','pay')">+ Add</button>
      </div>
      <div class="actions-right">
        <button id="paySubmit" class="btn green" onclick="submitSheet('Payables Debts','payTable','payStatus','paySubmit')">üì§ Submit</button>
      </div>
    </div>

    <div id="payStatus" class="status"></div>
  </div>
</div>

<!-- Logout Modal -->
<div id="logoutModal" class="modal-overlay" onclick="onLogoutOverlayClick(event)">
  <div class="modal">
    <h3>Logout?</h3>
    <p>You‚Äôll be returned to the login screen. Any unsaved inputs on this page will be lost.</p>
    <div class="modal-actions">
      <button class="btn gray" onclick="closeLogoutModal()">Cancel</button>
      <button class="btn red" onclick="confirmLogout()">Logout</button>
    </div>
  </div>
</div>

<iframe name="submission_iframe" style="display:none"></iframe>
<div id="toast" class="toast"></div>

<script>
  // ‚úÖ PUT YOUR WEB APP /exec URL HERE
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw7xmJyX7VFoRMEH-3TaMStvgF2QD4v9dwc8G01CZ01tOKNGF6gccp1Ux6FCjfK_r2hLA/exec";

  function showToast(msg, type='success', ms=2500){
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.className = 'toast show ' + (type === 'error' ? 'error' : 'success');
    setTimeout(()=>{ t.className = 'toast'; }, ms);
  }

  // Login
  function doLogin(){
    const c = document.getElementById('loginCode').value;
    if(c === 'promedLogin'){
      document.getElementById('loginScreen').style.display='none';
      document.getElementById('app').style.display='block';
      document.getElementById('loginError').textContent='';
    } else {
      document.getElementById('loginError').textContent='Incorrect code';
    }
  }

  // ‚úÖ New logout modal flow
  function openLogoutModal(){
    document.getElementById('logoutModal').classList.add('show');
  }

  function closeLogoutModal(){
    document.getElementById('logoutModal').classList.remove('show');
  }

  function onLogoutOverlayClick(e){
    if(e.target.id === 'logoutModal') closeLogoutModal();
  }

  function confirmLogout(){
    closeLogoutModal();
    document.getElementById('loginScreen').style.display='flex';
    document.getElementById('app').style.display='none';
    document.getElementById('loginCode').value='';
  }

  document.addEventListener('keydown', (e) => {
    if(e.key === 'Escape') closeLogoutModal();
  });

  document.getElementById('loginCode').addEventListener('keypress', e => {
    if(e.key === 'Enter') doLogin();
  });

  function showTab(i){
    document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    document.querySelectorAll('.tab-content')[i].classList.add('active');
    document.querySelectorAll('.tab-btn')[i].classList.add('active');
  }

  // ---------- Generic tables (inv/sales/pay) ----------
  function rowHtml(type){
    if(type==='inv'){
      return `
        <tr>
          <td><button class="icon-btn" onclick="deleteRow(this)">‚úï</button></td>
          <td><input type="text" placeholder="e.g. Littmann Classic III Stethoscope"></td>
          <td><input type="text" placeholder="e.g. Stethoscopes"></td>
          <td><input type="number" class="qty" min="0" placeholder="0"></td>
          <td><input type="number" class="cost" min="0" step="0.01" placeholder="0.00"></td>
          <td><input type="number" class="price" min="0" step="0.01" placeholder="0.00"></td>
          <td class="computed tc">0.00</td>
          <td class="computed tr">0.00</td>
          <td><input type="text" placeholder="Description / variant"></td>
        </tr>`;
    }
    if(type==='sales'){
      return `
        <tr>
          <td><button class="icon-btn" onclick="deleteRow(this)">‚úï</button></td>
          <td><input type="date"></td>
          <td><input type="text"></td>
          <td>
            <select>
              <option>Single</option>
              <option>Bundle</option>
            </select>
          </td>
          <td><input type="number" min="0" placeholder="0"></td>
          <td><input type="number" min="0" step="0.01" placeholder="0.00"></td>
          <td>
            <select>
              <option>Cash</option>
              <option>MoMo</option>
              <option>Transfer</option>
            </select>
          </td>
          <td><input type="text"></td>
        </tr>`;
    }
    if(type==='pay'){
      return `
        <tr>
          <td><button class="icon-btn" onclick="deleteRow(this)">‚úï</button></td>
          <td><input type="text"></td>
          <td><input type="number" min="0" step="0.01" placeholder="0.00"></td>
          <td><input type="text"></td>
          <td><input type="text"></td>
          <td><input type="date"></td>
          <td>
            <select>
              <option>Pending</option>
              <option>Paid</option>
              <option>Overdue</option>
            </select>
          </td>
          <td><input type="text"></td>
        </tr>`;
    }
    return `<tr><td><button class="icon-btn" onclick="deleteRow(this)">‚úï</button></td><td><input type="text"></td></tr>`;
  }

  function addRow(bodyId,type){
    const b = document.getElementById(bodyId);
    b.insertAdjacentHTML('beforeend', rowHtml(type));
  }

  function deleteRow(btn){
    const tr = btn.closest('tr');
    const tbody = tr.parentElement;
    if(tbody.querySelectorAll('tr').length <= 1){
      showToast("Can't delete the last row.", "error");
      return;
    }
    tr.remove();
  }

  document.addEventListener('input', (e) => {
    const tr = e.target.closest('tr');
    if(!tr) return;
    if(e.target.classList.contains('qty') || e.target.classList.contains('cost') || e.target.classList.contains('price')){
      const q = parseFloat(tr.querySelector('.qty')?.value) || 0;
      const c = parseFloat(tr.querySelector('.cost')?.value) || 0;
      const p = parseFloat(tr.querySelector('.price')?.value) || 0;
      const tc = tr.querySelector('.tc');
      const trc = tr.querySelector('.tr');
      if(tc) tc.textContent = (q*c).toFixed(2);
      if(trc) trc.textContent = (q*p).toFixed(2);
    }
  });

  function collectRows(tableId){
    const rows=[];
    const rowEls=[];
    document.getElementById(tableId).querySelectorAll('tbody tr').forEach(tr=>{
      const inputs = Array.from(tr.querySelectorAll('input,select,textarea'));
      const values = inputs.map(x => (x.value ?? '').trim());
      const meaningful = values.some(v => v !== '' && v !== '0' && v !== '0.00');
      if(!meaningful) return;

      const tds = Array.from(tr.querySelectorAll('td'));
      const row = tds.map(td=>{
        const el = td.querySelector('input,select,textarea');
        return el ? el.value : td.textContent;
      });

      rows.push(row);
      rowEls.push(tr);
    });
    return { rows, rowEls };
  }

  async function submitSheet(sheetName, tableId, statusId, submitBtnId){
    const st = document.getElementById(statusId);
    const submitBtn = document.getElementById(submitBtnId);
    submitBtn.disabled = true;

    st.className = 'status loading';
    st.textContent = 'üì§ Submitting...';

    const { rows, rowEls } = collectRows(tableId);
    if(rows.length === 0){
      st.className='status error';
      st.textContent='‚ö†Ô∏è No new data to submit.';
      submitBtn.disabled = false;
      setTimeout(()=>st.style.display='none', 2000);
      return;
    }

    for(let i=0;i<rows.length;i++){
      postToScript_({ sheetName, row: rows[i] });
      await new Promise(r => setTimeout(r, 300));
    }

    // Remove submitted rows so re-submits don't repeat them
    rowEls.forEach(tr => tr.remove());

    // Ensure at least one row exists after submit
    const table = document.getElementById(tableId);
    const bodyId = table.dataset.body;
    const rowType = table.dataset.rowtype;
    const tbody = document.getElementById(bodyId);
    if(tbody.querySelectorAll('tr').length === 0){
      addRow(bodyId, rowType);
    }

    st.className='status success';
    st.textContent=`‚úÖ Submitted ${rows.length} row(s)!`;
    showToast(`Submitted ‚úÖ (${rows.length} row${rows.length>1?'s':''})`, 'success');

    submitBtn.disabled = false;
    setTimeout(()=>st.style.display='none', 2500);
  }

  function postToScript_(payload){
    const form = document.createElement('form');
    form.method = 'POST';
    form.action = SCRIPT_URL;
    form.target = 'submission_iframe';

    const input = document.createElement('input');
    input.type = 'hidden';
    input.name = 'data';
    input.value = JSON.stringify(payload);

    form.appendChild(input);
    document.body.appendChild(form);
    form.submit();
    document.body.removeChild(form);
  }

  // ---------- Bundles (nested + dynamic items) ----------
  function uid(){
    return 'b_' + Math.random().toString(36).slice(2) + Date.now().toString(36);
  }

  function addBundle(){
    const id = uid();
    const tbody = document.getElementById('bundleBody');

    tbody.insertAdjacentHTML('beforeend', `
      <tr class="bundle-head" data-bundle-id="${id}">
        <td><button class="icon-btn" onclick="deleteBundle('${id}')">‚úï</button></td>
        <td><input type="text" placeholder="e.g. Student Diagnostic Kit" class="bundle-name"></td>
        <td><input type="number" min="0" step="0.01" placeholder="0.00" class="bundle-price"></td>
        <td><input type="text" placeholder="Description / variant" class="bundle-notes"></td>
        <td>
          <button class="btn gray" onclick="addBundleItem('${id}')">+ Add Item</button>
        </td>
      </tr>

      <tr class="bundle-items-row" data-bundle-id="${id}">
        <td></td>
        <td colspan="4">
          <div class="bundle-items-wrap">
            <table class="bundle-items-table" data-items-for="${id}">
              <thead>
                <tr>
                  <th style="width:50px">Del</th>
                  <th>Item</th>
                  <th style="width:140px">Qty</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <div class="small-note" style="margin-top:8px">
              Tip: add as many items as you want for this bundle.
            </div>
          </div>
        </td>
      </tr>
    `);

    addBundleItem(id); // start with one item row
  }

  function addBundleItem(bundleId){
    const table = document.querySelector(`table[data-items-for="${bundleId}"] tbody`);
    table.insertAdjacentHTML('beforeend', `
      <tr>
        <td><button class="icon-btn" onclick="deleteBundleItem(this)">‚úï</button></td>
        <td><input type="text" placeholder="e.g. Littmann Classic III"></td>
        <td><input type="number" min="0" placeholder="1"></td>
      </tr>
    `);
  }

  function deleteBundleItem(btn){
    const tr = btn.closest('tr');
    const tbody = tr.parentElement;
    if(tbody.querySelectorAll('tr').length <= 1){
      showToast("Bundle must have at least 1 item.", "error");
      return;
    }
    tr.remove();
  }

  function deleteBundle(bundleId){
    const head = document.querySelector(`tr.bundle-head[data-bundle-id="${bundleId}"]`);
    const items = document.querySelector(`tr.bundle-items-row[data-bundle-id="${bundleId}"]`);
    if(!head || !items) return;

    const totalBundles = document.querySelectorAll('tr.bundle-head').length;
    if(totalBundles <= 1){
      showToast("Can't delete the last bundle.", "error");
      return;
    }

    head.remove();
    items.remove();
  }

  function collectBundles(){
    const bundles = [];
    document.querySelectorAll('tr.bundle-head').forEach(head=>{
      const bundleId = head.dataset.bundleId;
      const name = head.querySelector('.bundle-name').value.trim();
      const price = head.querySelector('.bundle-price').value.trim();
      const notes = head.querySelector('.bundle-notes').value.trim();

      const itemRows = [];
      const itemsTbody = document.querySelector(`table[data-items-for="${bundleId}"] tbody`);
      itemsTbody.querySelectorAll('tr').forEach(tr=>{
        const cells = tr.querySelectorAll('td');
        const item = cells[1].querySelector('input').value.trim();
        const qty = cells[2].querySelector('input').value.trim();
        const meaningful = (item !== '') || (qty !== '' && qty !== '0');
        if(meaningful) itemRows.push({ item, qty });
      });

      const meaningfulBundle = name !== '' || price !== '' || notes !== '' || itemRows.length > 0;
      if(!meaningfulBundle) return;

      bundles.push({ bundleId, name, price, notes, items: itemRows });
    });
    return bundles;
  }

  async function submitBundles(statusId, submitBtnId){
    const st = document.getElementById(statusId);
    const btn = document.getElementById(submitBtnId);

    btn.disabled = true;
    st.className = 'status loading';
    st.textContent = 'üì§ Submitting bundles...';

    const bundles = collectBundles();
    if(bundles.length === 0){
      st.className='status error';
      st.textContent='‚ö†Ô∏è No new bundle data to submit.';
      btn.disabled = false;
      setTimeout(()=>st.style.display='none', 2000);
      return;
    }

    let bundleRows = 0;
    let itemRows = 0;

    for(const b of bundles){
      // Bundles Packages sheet: ["", name, price, notes, bundleId]
      postToScript_({
        sheetName: "Bundles Packages",
        row: ["", b.name, b.price, b.notes, b.bundleId]
      });
      bundleRows++;

      // Bundle Items sheet: ["", bundleId, item, qty]
      for(const it of b.items){
        postToScript_({
          sheetName: "Bundle Items",
          row: ["", b.bundleId, it.item, it.qty]
        });
        itemRows++;
      }

      await new Promise(r => setTimeout(r, 300));
    }

    document.getElementById('bundleBody').innerHTML = '';
    addBundle();

    st.className='status success';
    st.textContent=`‚úÖ Submitted ${bundleRows} bundle(s) + ${itemRows} item row(s)!`;
    showToast(`Submitted ‚úÖ (${bundleRows} bundles, ${itemRows} items)`, 'success');

    btn.disabled = false;
    setTimeout(()=>st.style.display='none', 2600);
  }

  // Init rows
  addRow('invBody','inv');
  addRow('salesBody','sales');
  addRow('payBody','pay');
  addBundle(); // start with one bundle
</script>
</body>
</html>
